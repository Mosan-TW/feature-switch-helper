{"version":3,"file":"json-config.utils.js","sourceRoot":"/","sources":["src/utils/json-config.utils.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,MAAM,IAAI,CAAA;AACnB,OAAO,EAAE,KAAK,EAAE,MAAM,gBAAgB,CAAA;AACtC,OAAO,IAAI,MAAM,MAAM,CAAA;AAQvB,MAAM,UAAU,cAAc,CAC5B,WAAgC,EAChC,QAAgB,EAChB,OAA8B;IAE9B,MAAM,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAA;IAC5F,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE,CAAC;QAC7B,MAAM,IAAI,KAAK,CAAC,iCAAiC,QAAQ,EAAE,CAAC,CAAA;IAC9D,CAAC;IACD,MAAM,WAAW,GAAG,EAAE,CAAC,YAAY,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAA;IACtD,MAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAA;IAC3C,OAAO,KAAK,CAAC,WAAW,EAAE,WAAW,EAAE,OAAO,CAAC,eAAe,EAAE,IAAI,CAAC,CAAA;AACvE,CAAC","sourcesContent":["import { ClassConstructor, ClassTransformOptions } from 'class-transformer'\nimport { ValidatorOptions } from 'class-validator'\nimport fs from 'fs'\nimport { toDto } from './dto.utils.js'\nimport path from 'path'\n\nexport interface LoadJsonConfigOptions {\n  baseDir: string\n  validateOption?: ValidatorOptions\n  transformOption?: ClassTransformOptions\n}\n\nexport function loadJsonConfig<T extends Record<string, any>>(\n  constructor: ClassConstructor<T>,\n  filePath: string,\n  options: LoadJsonConfigOptions,\n): T {\n  const fullPath = path.isAbsolute(filePath) ? filePath : path.join(options.baseDir, filePath)\n  if (!fs.existsSync(fullPath)) {\n    throw new Error(`Configuration file not found: ${fullPath}`)\n  }\n  const fileContent = fs.readFileSync(fullPath, 'utf-8')\n  const plainObject = JSON.parse(fileContent)\n  return toDto(constructor, plainObject, options.transformOption, true)\n}\n"]}